<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking Oficial | Club de la Milla</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f4f7f6; padding: 20px; text-align: center; }
        .ranking-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #27ae60; color: white; padding: 12px; border-radius: 8px 8px 0 0; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        .km-badge { background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="ranking-card">
        <h2>üèÜ TABLERO DE L√çDERES</h2>
        <p>¬°Cada 3 vueltas es 1 Kil√≥metro de salud!</p>
        <div id="tablaRanking">Cargando posiciones...</div>
    </div>

    <script>
        const URL_GOOGLE = "https://script.google.com/macros/s/AKfycbyJG2u-g4YXTRKRRXrTb6EKse7_K2TdUeVpWeLMn7S94EGZl5iLThZ3V0FGaiFV0GtOrA/exec"; // Reempl√°zala por tu URL de despliegue

        async function cargarRanking() {
            try {
                const response = await fetch(URL_GOOGLE);
                const data = await response.json();
                
                // Ordenar por vueltas de mayor a menor
                data.sort((a, b) => b.Vueltas - a.Vueltas);

                let html = `<table><tr><th>Pos</th><th>Corredor</th><th>Vueltas</th><th>Km</th></tr>`;
                data.slice(0, 10).forEach((user, index) => {
                    const km = (user.Vueltas / 3).toFixed(1);
                    html += `<tr>
                        <td>${index + 1}¬∫</td>
                        <td>${user.Nombre}</td>
                        <td>${user.Vueltas}</td>
                        <td><span class="km-badge">${km} km</span></td>
                    </tr>`;
                });
                html += `</table>`;
                document.getElementById('tablaRanking').innerHTML = html;
            } catch (e) {
                document.getElementById('tablaRanking').innerHTML = "Sincronizando datos en vivo...";
            }
        }
        setInterval(cargarRanking, 30000); // Se actualiza cada 30 segundos
        cargarRanking();
    </script>
</body>
</html>
